/* --- 之前的基础样式保持不变，请保留上一版的代码 --- */
/* 这里只列出新增/修改的部分 */

:root {
    --bg-gray: #f2f2f2;
    --border-gray: #ccc;
    /* 地形颜色 */
    --color-plains: #7cfc00;
    --color-forest: #228b22;
    --color-desert: #f4a460;
    --color-mountain: #808080;
    --color-gobi: #d2b48c;
}

body {
    margin: 0; padding: 0;
    font-family: 'Microsoft YaHei', sans-serif;
    background-color: #333;
    height: 100vh;
    display: flex; justify-content: center;
}

.app-container {
    width: 100%; max-width: 420px; height: 100%;
    background-color: #fff; display: flex; flex-direction: column;
    position: relative; z-index: 1;
}

/* ... (中间的 item-grid, d-pad-map 等样式保持上一版不变) ... */

/* 为了节省篇幅，这里假设你保留了上一版的样式，下面是新增的弹窗样式 */

/* --- 地图弹窗样式 --- */
.modal {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.95);
    z-index: 999;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.modal.hidden { display: none; }

.modal-content {
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
}

.modal-header {
    padding: 15px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    border-bottom: 2px solid #e74c3c;
    background: #fff;
}

.big-map-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #e0e0e0;
    overflow: auto;
}

.big-grid {
    display: grid;
    /* 9x9 网格 */
    grid-template-columns: repeat(9, 32px);
    grid-template-rows: repeat(9, 32px);
    gap: 2px;
    border: 5px solid #fff;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    background: #fff;
}

.map-cell {
    width: 32px; height: 32px;
    display: flex; justify-content: center; align-items: center;
    font-size: 12px;
    color: transparent; /* 默认不显示文字 */
    cursor: default;
}

/* 玩家位置 */
.map-cell.player {
    border: 2px solid red;
    z-index: 10;
    color: #000;
    font-weight: bold;
}

/* 迷雾 */
.map-cell.fog { background-color: #eee !important; }

/* 地形颜色类 */
.bg-PLAINS { background: var(--color-plains); }
.bg-FOREST { background: var(--color-forest); color: white; }
.bg-DESERT { background: var(--color-desert); }
.bg-MOUNTAIN { background: var(--color-mountain); color: white; }
.bg-GOBI { background: var(--color-gobi); }

.modal-footer {
    padding: 20px;
    text-align: center;
    background: #3498db;
    color: white;
    font-weight: bold;
    cursor: pointer;
}
